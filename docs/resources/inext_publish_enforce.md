---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "inext_publish_enforce Resource - terraform-provider-infinity-next"
subcategory: ""
description: |-
  Publish and Enforce resource - triggers publish and/or enforce operations. Works the same as running inext publish and inext enforce CLI commands. Note: Only ONE instance of this resource is allowed per provider/account.
---

# inext_publish_enforce (Resource)

Publish and Enforce resource - triggers publish and/or enforce operations. Works the same as running `inext publish` and `inext enforce` CLI commands. **Note: Only ONE instance of this resource is allowed per provider/account.**

## Example Usage

```terraform
terraform {
  required_providers {
    inext = {
      source  = "CheckPointSW/infinity-next"
      version = "~>1.5.0"
    }
  }
}

provider "inext" {
  region = "eu"
  # client_id  = ""  // can be set with env var INEXT_CLIENT_ID
  # access_key = "" // can be set with env var INEXT_ACCESS_KEY
}

variable "publish" {
  type        = bool
  default     = false
  description = "Set to true to trigger publish operation"
}

variable "enforce" {
  type        = bool
  default     = false
  description = "Set to true to trigger enforce operation"
}

# Example resources that would be created before publish/enforce
resource "inext_web_app_asset" "my-webapp-asset" {
  name = "my web app"
  urls = ["http://example.com"]
  # ... other configuration
}

resource "inext_appsec_gateway_profile" "my-appsec-gateway-profile" {
  name = "my appsec gateway profile"
  # ... other configuration
}

# Publish and Enforce resource - should be the last resource to be applied
# Only ONE instance is allowed per provider/account
resource "inext_publish_enforce" "publish-and-enforce" {
  publish = var.publish
  enforce = var.enforce

  # Optional: specify profile IDs to enforce directly in the resource
  # If empty or not provided, all profiles will be enforced
  # profile_ids = ["profile-id-1", "profile-id-2"]

  # IMPORTANT: depends_on MUST include ALL other resources to ensure
  # publish/enforce runs last and avoids conflicts
  depends_on = [
    inext_web_app_asset.my-webapp-asset,
    inext_appsec_gateway_profile.my-appsec-gateway-profile,
    # Add all other resources that should be created before publish/enforce
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `enforce` (Boolean) When true, triggers an enforce operation (same as `inext enforce`)
- `id` (String) The ID of this resource.
- `profile_ids` (List of String) List of profile IDs to enforce. If empty, all profiles will be enforced
- `publish` (Boolean) When true, triggers a publish operation (same as `inext publish`)


